databaseChangeLog:
  - changeSet:
      id: 005-fix-questions-sequence
      author: puhlikov
      validCheckSum: ANY
      changes:
        - sql:
            sql: |
              -- Синхронизируем последовательность для таблицы questions
              -- Устанавливаем значение последовательности на максимальный ID + 1
              -- Это одноразовая миграция для исправления существующей рассинхронизации
              -- В дальнейшем синхронизация будет происходить автоматически через триггер
              SELECT setval(
                pg_get_serial_sequence('questions', 'id'),
                COALESCE((SELECT MAX(id) FROM questions), 1),
                false
              );

